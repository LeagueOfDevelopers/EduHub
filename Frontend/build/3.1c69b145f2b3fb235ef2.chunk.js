webpackJsonp([3],{"./app/containers/NotificationPage/actions.js":function(e,t,n){"use strict";function r(e,t){return{type:d.b,invitationId:e,status:t}}function o(e,t){return{type:d.c,groupId:e,status:t}}function i(e){return{type:d.a,error:e}}function a(){return{type:d.h}}function s(e){return{type:d.i,notifies:e}}function c(e){return{type:d.g,error:e}}function u(){return{type:d.e}}function p(e){return{type:d.f,invites:e}}function f(e){return{type:d.d,error:e}}t.a=r,t.c=o,t.b=i,t.g=a,t.i=s,t.h=c,t.d=u,t.f=p,t.e=f;var d=n("./app/containers/NotificationPage/constants.js")},"./app/containers/NotificationPage/constants.js":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"h",function(){return a}),n.d(t,"i",function(){return s}),n.d(t,"g",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return p}),n.d(t,"d",function(){return f});var r="CHANGE_INVITATION_STATUS_START",o="CHANGE_INVITATION_STATUS_SUCCESS",i="CHANGE_INVITATION_STATUS_FAILED",a="GET_NOTIFIES_START",s="GET_NOTIFIES_SUCCESS",c="GET_NOTIFIES_FAILED",u="GET_INVITES_START",p="GET_INVITES_SUCCESS",f="GET_INVITES_FAILED"},"./app/containers/NotificationPage/index.js":function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments[1];switch(t.type){case w.b:return"Accepted"===t.status?e.set("pending",!0).set("needUpdate",!1):e.set("pending",!0).set("needUpdate",!0);case w.c:return t.groupId&&"Accepted"===t.status&&location.assign("/group/"+t.groupId),e.set("pending",!1).set("needUpdate",!1);case w.a:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case w.h:return e.set("pending",!0);case w.i:return e.set("pending",!1).set("notifies",t.notifies);case w.g:return e.set("pending",!1).set("error",!0);case w.e:return e.set("pending",!0);case w.f:return e.set("pending",!1).set("invites",t.invites);case w.d:return e.set("pending",!1).set("error",!0);default:return e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){return{acceptInvitation:function(t,n){return e(Object(N.a)(t,n))},declineInvitation:function(t,n){return e(Object(N.a)(t,n))}}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e){return{getNotifies:function(){return e(Object(N.g)())},getInvites:function(){return e(Object(N.d)())}}}Object.defineProperty(t,"__esModule",{value:!0});var y=n("./node_modules/react/react.js"),v=n.n(y),g=(n("./node_modules/prop-types/index.js"),n("./node_modules/react-redux/es/index.js")),h=n("./node_modules/reselect/es/index.js"),m=n("./node_modules/redux/es/index.js"),j=n("./app/utils/injectSaga.js"),O=n("./app/utils/injectReducer.js"),_=function(e){return e.get("notificationPage")},S=n("./node_modules/immutable/dist/immutable.js"),w=n("./app/containers/NotificationPage/constants.js"),x=n("./node_modules/antd/lib/index.js"),I=Object(S.fromJS)({notifies:[],invites:[],pending:!1,error:!1,needUpdate:!1}),T=r,P=n("./app/containers/NotificationPage/saga.js"),N=n("./app/containers/NotificationPage/actions.js"),k=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=k("div",{className:"readed-btn"}),U=k("div",{className:"not-readed-btn"}),C=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),A(t,[{key:"render",value:function(){return k(x.Card,{hoverable:!0,className:"notify-card",style:{width:"100%",cursor:"default",position:"relative",overflow:"visible"},bodyStyle:{padding:"14px 20px"}},void 0,this.props.readed?E:U,k(x.Row,{style:{marginBottom:12}},void 0,k(x.Col,{span:12},void 0,k("span",{style:{fontSize:14,opacity:.9}},void 0,this.props.fromUser)),k(x.Col,{span:12,style:{textAlign:"right"}},void 0,k("span",{style:{fontSize:14,opacity:.7}},void 0,this.props.date))),k(x.Row,{},void 0,k("span",{style:{wordWrap:"break-word"}},void 0,this.props.text)))}}]),t}(v.a.PureComponent),R=C,D=n("./app/globalJS.js"),G=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),z=G("div",{className:"readed-btn"}),J=G("div",{className:"not-readed-btn"}),F=function(e){function t(e){s(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tryAccept=n.tryAccept.bind(n),n.tryDecline=n.tryDecline.bind(n),n}return u(t,e),B(t,[{key:"tryAccept",value:function(){"true"!==localStorage.getItem("without_server")&&this.props.acceptInvitation(this.props.id,"Accepted")}},{key:"tryDecline",value:function(){"true"!==localStorage.getItem("without_server")&&this.props.declineInvitation(this.props.id,"Declined")}},{key:"render",value:function(){return G(x.Card,{hoverable:!0,className:"notify-card",style:{width:"100%",cursor:"default"},bodyStyle:{padding:"14px 20px 0 20px"}},void 0,this.props.readed?z:J,G(x.Row,{style:{marginBottom:12}},void 0,G(x.Col,{span:12},void 0,G("span",{style:{fontSize:14,opacity:.9}},void 0,this.props.fromUserName)),G(x.Col,{span:12,style:{textAlign:"right"}},void 0,G("span",{style:{fontSize:14,opacity:.7}},void 0,this.props.date))),G(x.Row,{},void 0,G(x.Col,{xs:{span:24},sm:{span:12},style:{marginBottom:10}},void 0,G("span",{style:{wordWrap:"break-word"}},void 0,'Вас пригласили в группу "',this.props.toGroupTitle,'" на роль "',Object(D.c)(this.props.suggestedRole),'"')),G(x.Col,{xs:{span:24},sm:{span:12},style:{textAlign:"right"}},void 0,G(x.Button,{type:"primary",style:{marginRight:12,marginBottom:14},onClick:this.tryAccept},void 0,"Принять"),G(x.Button,{onClick:this.tryDecline},void 0,"Отклонить"))))}}]),t}(v.a.PureComponent),L=Object(h.b)({}),V=Object(g.b)(L,p),$=Object(O.a)({key:"notificationPage",reducer:T}),q=Object(j.a)({key:"notificationPage",saga:P.a}),H=Object(m.c)($,q,V)(F);n.d(t,"NotificationPage",function(){return Z});var M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),K=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Q=x.Tabs.TabPane,X=[{id:"1233123124",fromUser:"Имя отправителя",date:(new Date).toDateString(),text:"Текст уведомления",readed:!1},{id:"dasqdsad",fromUser:"Имя отправителя",date:(new Date).toDateString(),text:"Текст уведомления",readed:!0},{id:"qwersifhxjk",fromUser:"Имя отправителя",date:(new Date).toDateString(),text:"Текст уведомления",readed:!0}],Y=[{id:"dasqdsadsdfsdf",fromUser:"fdspijfjlkf",fromUserName:"Имя отправителя",date:(new Date).toDateString(),toGroup:"32478643981654",toGroupTitle:"JS Juniors",suggestedRole:"Участник",readed:!1},{id:"dasqdsddsfwee",fromUser:"324gj3h4j1",fromUserName:"Имя отправителя",date:(new Date).toDateString(),toGroup:"dr32847363274",toGroupTitle:"C# Juniors",suggestedRole:"Участник",readed:!0}],Z=function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={needUpdate:n.props.needUpdate},n}return l(t,e),K(t,[{key:"componentDidMount",value:function(){"true"===localStorage.getItem("without_server")?this.setState({notifies:this.notifies,invites:this.invites}):(this.props.getNotifies(),this.props.getInvites()),console.log(this.props.invites)}},{key:"componentDidUpdate",value:function(e,t){e.needUpdate!==this.props.needUpdate&&this.props.getInvites()}},{key:"render",value:function(){return W("div",{},void 0,W(x.Row,{className:"notify-tabs"},void 0,W(x.Col,{xs:{span:22,offset:1},sm:{span:20,offset:2},lg:{span:12,offset:6}},void 0,W(x.Tabs,{defaultActiveKey:"1",style:{margin:"30px 0"}},void 0,W(Q,{tab:"Уведомления",style:{margin:"30px 0"}},"1","true"===localStorage.getItem("withoutServer")?W("div",{},void 0,X.reverse().map(function(e){return v.a.createElement(R,M({key:e.id},e))})):W("div",{},void 0,this.props.notifies.reverse().map(function(e){return v.a.createElement(R,M({key:e.id},e))}))),W(Q,{tab:"Приглашения",style:{margin:"30px 0"}},"2","true"===localStorage.getItem("withoutServer")?W("div",{},void 0,Y.reverse().map(function(e){return v.a.createElement(H,M({key:e.id},e))})):W("div",{},void 0,this.props.invites.reverse().map(function(e){return v.a.createElement(H,M({key:e.id},e))})))))))}}]),t}(v.a.Component),ee=Object(h.b)({notifies:function(){return Object(h.a)(_,function(e){return e.get("notifies")})}(),invites:function(){return Object(h.a)(_,function(e){return e.get("invites")})}(),needUpdate:function(){return Object(h.a)(_,function(e){return e.get("needUpdate")})}()}),te=Object(g.b)(ee,b),ne=Object(O.a)({key:"notificationPage",reducer:T}),re=Object(j.a)({key:"notificationPage",saga:P.a});t.default=Object(m.c)(ne,re,te)(Z)},"./app/containers/NotificationPage/saga.js":function(e,t,n){"use strict";(function(e){function r(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.status,r.next=4,Object(p.a)(c,e.invitationId,e.status);case 4:return n=r.sent,r.next=7,Object(p.b)(Object(l.c)(n.groupId,t));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,Object(p.b)(Object(l.b)(r.t0));case 13:case"end":return r.stop()}},b,this,[[0,9]])}function o(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p.a)(a);case 3:return e=t.sent,t.next=6,Object(p.b)(Object(l.i)(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(p.b)(Object(l.h)(t.t0));case 12:case"end":return t.stop()}},y,this,[[0,8]])}function i(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p.a)(s);case 3:return e=t.sent,t.next=6,Object(p.b)(Object(l.f)(e.invitations));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(p.b)(Object(l.e)(t.t0));case 12:case"end":return t.stop()}},v,this,[[0,8]])}function a(){return e(f.a.API_BASE_URL+"/user/profile/notifies",{headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).catch(function(e){return e})}function s(){return e(f.a.API_BASE_URL+"/user/profile/invitations",{headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e})}function c(t,n){return e(f.a.API_BASE_URL+"/user/profile/invitations",{method:"PUT",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({invitationId:t,status:n})}).then(function(e){return e.json()}).catch(function(e){return e})}function u(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.c)(d.b,r);case 2:return e.next=4,Object(p.c)(d.h,o);case 4:return e.next=6,Object(p.c)(d.e,i);case 6:case"end":return e.stop()}},g,this)}t.a=u;var p=n("./node_modules/redux-saga/es/effects.js"),f=n("./app/config.js"),d=n("./app/containers/NotificationPage/constants.js"),l=n("./app/containers/NotificationPage/actions.js"),b=regeneratorRuntime.mark(r),y=regeneratorRuntime.mark(o),v=regeneratorRuntime.mark(i),g=regeneratorRuntime.mark(u)}).call(t,n("./node_modules/exports-loader/index.js?self.fetch!./node_modules/whatwg-fetch/fetch.js"))}});