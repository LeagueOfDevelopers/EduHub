webpackJsonp([3],{"./app/components/MakeReportModal/index.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{makeReport:function(t,n,r){return e(Object(d.E)(t,n,r))}}}var s=n("./node_modules/react/react.js"),c=n.n(s),u=n("./node_modules/reselect/es/index.js"),l=n("./node_modules/react-redux/es/index.js"),d=n("./app/containers/ProfilePage/actions.js"),p=n("./node_modules/antd/lib/index.js"),f=(n.n(p),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,a){var o=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===i)n.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}()),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=p.Form.Item,m=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onHandleReasonChange=function(e){n.setState({reasonValue:e.target.value})},n.onHandleDescriptionChange=function(e){n.setState({descriptionValue:e.target.value})},n.applyReport=function(){n.state.reasonValue&&n.state.descriptionValue?(n.props.makeReport(n.props.userId,n.state.reasonValue,n.state.descriptionValue),n.props.handleCancel(),n.setState({reasonValue:"",descriptionValue:""})):p.message.error("Введите все данные!")},n.state={reasonValue:"",descriptionValue:""},n.onHandleReasonChange=n.onHandleReasonChange.bind(n),n.onHandleDescriptionChange=n.onHandleDescriptionChange.bind(n),n.applyReport=n.applyReport.bind(n),n}return o(t,e),h(t,[{key:"render",value:function(){return f(p.Modal,{visible:this.props.visible,onCancel:this.props.handleCancel,width:"500px",closable:!1,bodyStyle:{padding:"30px 10%"},footer:null},void 0,f(p.Row,{style:{margin:"0px 0 40px"}},void 0,f("h2",{style:{marginBottom:0}},void 0,"Жалоба на ",this.props.username)),f(p.Form,{},void 0,f(g,{},void 0,f(p.Input,{placeholder:"Причина репорта",onChange:this.onHandleReasonChange,value:this.state.reasonValue})),f(g,{},void 0,f(p.Input.TextArea,{placeholder:"Описание нарушения",onChange:this.onHandleDescriptionChange,value:this.state.descriptionValue,autosize:{minRows:3}})),f(p.Row,{type:"flex",justify:"center",className:"lg-center-container-item",style:{marginTop:42}},void 0,f(p.Button,{className:"group-btn lg-margin-right-0",type:"primary",style:{width:160,marginRight:20,marginBottom:10},onClick:this.applyReport},void 0,"Подтвердить"),f(p.Button,{className:"group-btn",onClick:this.props.handleCancel,style:{width:160,marginBottom:10}},void 0,"Отменить"))))}}]),t}(c.a.Component),b=Object(u.b)({});t.a=Object(l.b)(b,i)(m)},"./app/containers/ProfilePage/actions.js":function(e,t,n){"use strict";function r(e){return{type:H.v,id:e}}function a(e){return{type:H.x,groups:e}}function o(e){return{type:H.w,error:e}}function i(e,t,n,r,a,o){return{type:H.q,name:e,aboutUser:t,gender:n,contacts:r,birthYear:a,avatarLink:o}}function s(e,t){return{type:H.r,newName:e,newAvatarLink:t}}function c(e){return{type:H.p,error:e}}function u(e){return{type:H.m,username:e}}function l(){return{type:H.o}}function d(e){return{type:H.n,error:e}}function p(e){return{type:H.a,aboutUser:e}}function f(){return{type:H.c}}function h(e){return{type:H.b,error:e}}function g(e){return{type:H.d,birthYear:e}}function m(){return{type:H.f}}function b(e){return{type:H.e,error:e}}function v(e){return{type:H.j,gender:e}}function y(){return{type:H.l}}function j(e){return{type:H.k,error:e}}function S(e){return{type:H.g,contacts:e}}function C(){return{type:H.i}}function P(e){return{type:H.h,error:e}}function I(){return{type:H.H}}function O(){return{type:H.J}}function _(e){return{type:H.I,error:e}}function E(){return{type:H.B}}function w(){return{type:H.D}}function k(e){return{type:H.C,error:e}}function R(e){return{type:H.t,skills:e}}function U(){return{type:H.u}}function x(e){return{type:H.s,error:e}}function T(e,t,n){return{type:H.F,userId:e,reason:t,description:n}}function A(){return{type:H.G}}function D(e){return{type:H.E,error:e}}function B(e){return{type:H.z,tag:e}}function L(e){return{type:H.A,tags:e}}function N(e){return{type:H.y,error:e}}t.v=r,t.x=a,t.w=o,t.m=i,t.o=s,t.n=c,t.s=u,t.u=l,t.t=d,t.a=p,t.c=f,t.b=h,t.d=g,t.f=m,t.e=b,t.j=v,t.l=y,t.k=j,t.g=S,t.i=C,t.h=P,t.H=I,t.J=O,t.I=_,t.B=E,t.D=w,t.C=k,t.p=R,t.r=U,t.q=x,t.E=T,t.G=A,t.F=D,t.y=B,t.A=L,t.z=N;var H=n("./app/containers/ProfilePage/constants.js")},"./app/containers/ProfilePage/constants.js":function(e,t,n){"use strict";n.d(t,"v",function(){return r}),n.d(t,"x",function(){return a}),n.d(t,"w",function(){return o}),n.d(t,"q",function(){return i}),n.d(t,"r",function(){return s}),n.d(t,"p",function(){return c}),n.d(t,"m",function(){return u}),n.d(t,"o",function(){return l}),n.d(t,"n",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"j",function(){return g}),n.d(t,"l",function(){return m}),n.d(t,"k",function(){return b}),n.d(t,"d",function(){return v}),n.d(t,"f",function(){return y}),n.d(t,"e",function(){return j}),n.d(t,"g",function(){return S}),n.d(t,"i",function(){return C}),n.d(t,"h",function(){return P}),n.d(t,"H",function(){return I}),n.d(t,"J",function(){return O}),n.d(t,"I",function(){return _}),n.d(t,"B",function(){return E}),n.d(t,"D",function(){return w}),n.d(t,"C",function(){return k}),n.d(t,"t",function(){return R}),n.d(t,"u",function(){return U}),n.d(t,"s",function(){return x}),n.d(t,"F",function(){return T}),n.d(t,"G",function(){return A}),n.d(t,"E",function(){return D}),n.d(t,"z",function(){return B}),n.d(t,"A",function(){return L}),n.d(t,"y",function(){return N});var r="GET_CURRENT_USER_GROUPS",a="GET_CURRENT_USER_GROUPS_SUCCESS",o="GET_CURRENT_USER_GROUPS_FAILED",i="EDIT_PROFILE_START",s="EDIT_PROFILE_SUCCESS",c="EDIT_PROFILE_FAILED",u="EDIT_NAME",l="EDIT_NAME_SUCCESS",d="EDIT_NAME_FAILED",p="EDIT_ABOUT_USER_INFO",f="EDIT_ABOUT_USER_INFO_SUCCESS",h="EDIT_ABOUT_USER_INFO_FAILED",g="EDIT_GENDER",m="EDIT_GENDER_SUCCESS",b="EDIT_GENDER_FAILED",v="EDIT_BIRTH_YEAR",y="EDIT_BIRTH_YEAR_SUCCESS",j="EDIT_BIRTH_YEAR_FAILED",S="EDIT_CONTACTS",C="EDIT_CONTACTS_SUCCESS",P="EDIT_CONTACTS_FAILED",I="MAKE_TEACHER",O="MAKE_TEACHER_SUCCESS",_="MAKE_TEACHER_FAILED",E="MAKE_NOT_TEACHER",w="MAKE_NOT_TEACHER_SUCCESS",k="MAKE_NOT_TEACHER_FAILED",R="EDIT_SKILLS_START",U="EDIT_SKILLS_SUCCESS",x="EDIT_SKILLS_FAILED",T="MAKE_REPORT_START",A="MAKE_REPORT_SUCCESS",D="MAKE_REPORT_FAILED",B="GET_GROUP_TAGS_START",L="GET_GROUP_TAGS_SUCCESS",N="GET_GROUP_TAGS_FAILED"},"./app/containers/ProfilePage/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{getCurrentUserGroups:function(t){return e(Object(b.v)(t))},editUsername:function(t){return e(Object(b.s)(t))},editAboutUser:function(t){return e(Object(b.a)(t))},editBirthYear:function(t){return e(Object(b.d)(t))},editContacts:function(t){return e(Object(b.g)(t))},editGender:function(t){return e(Object(b.j)(t))},makeTeacher:function(){return e(Object(b.H)())},makeNotTeacher:function(){return e(Object(b.B)())},editSkills:function(t){return e(Object(b.p)(t))},editProfile:function(t,n,r,a,o,i){return e(Object(b.m)(t,n,r,a,o,i))},getTags:function(t){return e(Object(b.y)(t))}}}n.d(t,"ProfilePage",function(){return J});var s=n("./node_modules/react/react.js"),c=n.n(s),u=n("./node_modules/prop-types/index.js"),l=(n.n(u),n("./node_modules/react-redux/es/index.js")),d=n("./node_modules/reselect/es/index.js"),p=n("./node_modules/redux/es/index.js"),f=n("./app/utils/injectSaga.js"),h=n("./app/utils/injectReducer.js"),g=n("./node_modules/moment/src/moment.js"),m=n("./app/containers/ProfilePage/selectors.js"),b=n("./app/containers/ProfilePage/actions.js"),v=n("./app/containers/ProfilePage/reducer.js"),y=n("./app/containers/ProfilePage/saga.js"),j=n("./app/globalJS.js"),S=n("./app/config.js"),C=n("./node_modules/react-router-dom/index.js"),P=(n.n(C),n("./app/components/UnassembledGroupCard/index.js")),I=n("./app/components/MakeReportModal/index.js"),O=n("./node_modules/antd/lib/index.js"),_=(n.n(O),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),E=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,a){var o=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===i)n.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=O.Form.Item,R=O.Tabs.TabPane,U={userProfile:{name:"Имя пользователя",tags:["js","c#"],sex:"Мужской",years:19,experience:3,description:"Краткая инфа о себе. Краткая инфа о себе. Краткая инфа о себе.\n                  Краткая инфа о себе.",links:["LinkedIn","Vk"]}},x=[{groupInfo:{id:1,title:"cdcvvdsc",length:6,size:8,moneyPerUser:600,groupType:"Lfdsv",tags:["fds","sdf"]}},{groupInfo:{id:3,title:"dscsdc",length:6,size:8,moneyPerUser:600,groupType:"Lfdsv",tags:["fds","sdf"]}},{groupInfo:{id:1,title:"cdcvvdsc",length:6,size:8,moneyPerUser:600,groupType:"Lfdsv",tags:["fds","sdf"]}},{groupInfo:{id:3,title:"dscsdc",length:6,size:8,moneyPerUser:600,groupType:"Lfdsv",tags:["fds","sdf"]}}],T=E("div",{},void 0,"Email"),A=E("div",{},void 0,"Пол"),D=E(O.Select.Option,{value:"Unknown"},void 0,"Не скажу"),B=E(O.Select.Option,{value:"Man"},void 0,"Мужской"),L=E(O.Select.Option,{value:"Woman"},void 0,"Женский"),N=E("div",{},void 0,"Дата рождения"),H=E("div",{},void 0,"Основные навыки"),Y=E("div",{},void 0,"О себе"),z=E("div",{},void 0,"Ссылки"),F=E(O.Icon,{type:"plus"}),G=E(O.Row,{type:"flex",justify:"center"},void 0,"Групп пока нет"),M=E(O.Row,{type:"flex",justify:"center"},void 0,"Отзывов пока нет"),V=E("span",{},void 0,"Нажмите, чтобы перейти в панель администратора"),J=function(t){function n(t){r(this,n);var o=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return o.onReportClick=function(){o.setState({reportVisible:!0})},o.handleReportCancel=function(){o.setState({reportVisible:!1})},o.onHandleSearch=function(e){o.props.getTags(e)},o.getCurrentUser=function(t){e(S.a.API_BASE_URL+"/user/profile/"+t,{headers:{"Content-Type":"application/json-patch+json"}}).then(function(e){return e.json()}).then(function(e){return o.onSetResult(e)}).catch(function(e){return e})},o.onSetResult=function(e){o.setState({userProfile:e.userProfile?e.userProfile:{},teacherProfile:e.teacherProfile,imageUrl:e.userProfile.avatarLink,nameInput:e.userProfile.name,genderInput:1===e.userProfile.gender?"Man":2===e.userProfile.gender?"Woman":"Unknown",birthYearInput:e.userProfile.birthYear?e.userProfile.birthYear:new Date,aboutInput:e.userProfile.aboutUser?e.userProfile.aboutUser:"",contactsInputs:e.userProfile.contacts?e.userProfile.contacts:[],isCurrentUser:Boolean(o.state.userData&&o.props.match.params.id==o.state.userData.UserId)})},o.onChangeNameHandle=function(e){o.setState({nameInput:e.target.value})},o.onChangeGenderHandle=function(e){o.setState({genderInput:e})},o.onChangeBirthYearHandle=function(e,t){o.setState({birthYearInput:e})},o.onChangeAboutHandle=function(e){o.setState({aboutInput:e.target.value})},o.addContact=function(){o.setState({contactsInputs:o.state.contactsInputs.concat("")})},o.removeContact=function(e){o.setState({contactsInputs:o.state.contactsInputs.filter(function(t,n){return n!==e})})},o.onHandleChangeContact=function(e,t){o.setState({contactsInputs:o.state.contactsInputs.map(function(n,r){return r===t?e.target.value:n})})},o.cancelChanges=function(){o.setState({isEditing:!1,nameInput:o.state.userProfile.name,aboutInput:o.state.userProfile.aboutUser,birthYearInput:o.state.userProfile.birthYear,contactsInputs:o.state.userProfile.contacts?o.state.userProfile.contacts:[],genderInput:1===o.state.userProfile.gender?"Man":2===o.state.userProfile.gender?"Woman":"Unknown",imageUrl:o.state.userProfile.avatarLink})},o.changeProfileData=function(e){e.preventDefault(),o.props.form.validateFields(function(e,t){e||(o.setState({contactsInputs:o.state.contactsInputs.filter(function(e){return""!==e})}),o.state.contactsInputs.length===o.state.userProfile.contacts.length&&0===o.state.contactsInputs.filter(function(e,t){return e!==o.state.userProfile.contacts[t]}).length&&o.state.aboutInput===o.state.userProfile.aboutUser&&o.state.birthYearInput===o.state.userProfile.birthYear&&Object(j.d)(o.state.genderInput)===o.state.userProfile.gender&&o.state.nameInput===o.state.userProfile.name&&o.state.imageUrl===o.state.userProfile.avatarLink||setTimeout(function(){return o.props.editProfile(o.state.nameInput,o.state.aboutInput,o.state.genderInput,o.state.contactsInputs,o.state.birthYearInput,o.state.imageUrl?o.state.imageUrl:"")},0),(o.state.teacherProfile&&o.state.teacherProfile.skills&&(o.state.skillsInput.length!==o.state.teacherProfile.skills.length||o.state.teacherProfile&&o.state.teacherProfile.skills&&0!==o.state.skillsInput.filter(function(e,t){return e!==o.state.teacherProfile.skills[t]}).length)||o.state.teacherProfile&&!o.state.teacherProfile.skills)&&setTimeout(function(){return o.props.editSkills(o.state.skillsInput)},0),o.setState({isEditing:!1}))})},o.onChangeSkillsHandle=function(e){o.setState({skillsInput:e})},o.handleAvatarLinkChange=function(e){return"uploading"===e.file.status?void o.setState({imageUrl:"",loading:!0}):"error"===e.file.status?void o.setState({loading:!1}):void("done"===e.file.status&&o.setState({imageUrl:e.file.response.filename,loading:!1}))},o.state={id:o.props.match.params.id,userProfile:{name:"",email:"",avatarLink:"",gender:"",birthYear:"",aboutUser:"",contacts:[]},teacherProfile:null,isEditing:!1,nameInput:"",genderInput:"Unknown",birthYearInput:"",skillsInput:[],aboutInput:"",imageUrl:null,avatarLoading:!1,contactsInputs:[],userData:localStorage.getItem("token")?Object(j.k)(localStorage.getItem("token")):null,isCurrentUser:!1,reportVisible:!1},o.onSetResult=o.onSetResult.bind(o),o.onReportClick=o.onReportClick.bind(o),o.handleReportCancel=o.handleReportCancel.bind(o),o.getCurrentUser=o.getCurrentUser.bind(o),o.onChangeNameHandle=o.onChangeNameHandle.bind(o),o.onChangeGenderHandle=o.onChangeGenderHandle.bind(o),o.onChangeBirthYearHandle=o.onChangeBirthYearHandle.bind(o),o.onChangeAboutHandle=o.onChangeAboutHandle.bind(o),o.changeProfileData=o.changeProfileData.bind(o),o.addContact=o.addContact.bind(o),o.removeContact=o.removeContact.bind(o),o.cancelChanges=o.cancelChanges.bind(o),o.handleAvatarLinkChange=o.handleAvatarLinkChange.bind(o),o.onHandleSearch=o.onHandleSearch.bind(o),o}return o(n,t),w(n,[{key:"componentDidMount",value:function(){"true"!==localStorage.getItem("without_server")?(this.getCurrentUser(this.props.match.params.id),this.props.getCurrentUserGroups(this.props.match.params.id)):this.onSetResult(U)}},{key:"componentDidUpdate",value:function(e,t){(e.needUpdate&&!this.props.needUpdate||e.location.pathname!==this.props.location.pathname)&&this.componentDidMount()}},{key:"render",value:function(){var e=this,t={name:"file",action:S.a.API_BASE_URL+"/file",headers:{Authorization:"Bearer "+localStorage.getItem("token")},accept:"image/*",onChange:this.handleAvatarLinkChange,showUploadList:!1},n=this.props.form.getFieldDecorator;return E("div",{style:{height:"calc(100% - 64px)"}},void 0,E(O.Col,{xs:{span:20,offset:2},sm:{span:16,offset:4},style:{marginTop:40,marginBottom:40},className:"md-center-container"},void 0,E(O.Col,{xs:{span:24},md:{span:11},lg:{span:10},xl:{span:8},xxl:{span:6},className:"lg-center-container-item"},void 0,E(O.Form,{className:"profile-form",style:{width:"100%"},onSubmit:this.changeProfileData},void 0,E(O.Card,{title:E(O.Row,{type:"flex",align:"middle"},void 0,E(O.Col,{span:24,style:{display:"flex",alignItems:"center"}},void 0,E(O.Col,{xs:{span:8},lg:{span:7}},void 0,this.state.isEditing?c.a.createElement(O.Upload,_({},t,{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:30,marginRight:14,width:50,height:50,borderRadius:"50%",cursor:"pointer"}}),this.state.imageUrl?E("img",{src:S.a.API_BASE_URL+"/file/img/"+this.state.imageUrl,style:{height:50,width:50,borderRadius:"50%"},alt:""}):E(O.Icon,{type:this.state.loading?"loading":"user"})):E(O.Avatar,{src:this.state.userProfile.avatarLink?S.a.API_BASE_URL+"/file/img/"+this.state.userProfile.avatarLink:"",style:{minHeight:50,minWidth:50,marginRight:14,borderRadius:"50%"}},void 0)),E(O.Col,{className:"word-break",xs:{span:16},lg:{span:17}},void 0,this.state.isEditing?E(k,{style:{width:"100%",marginBottom:0}},void 0,n("name",{rules:[{required:!0,message:"Пожалуйста, введите свое имя!"},{message:"Имя должно быть не меньше 3 символов!",min:3},{message:"Имя должно быть не больше 70 символов!",max:70},{message:"В имени должны быть только буквы!",pattern:/^[a-zA-Zа-яА-Яё\s]+$/}],initialValue:this.state.nameInput})(E(O.Input,{style:{width:"100%"},onChange:this.onChangeNameHandle,placeholder:"Так вас будут видеть на сайте"}))):this.state.userProfile.name))),hoverable:!0,className:"profile-card header-font-size-20 without-border-bottom"},void 0,this.state.isCurrentUser?E(O.Row,{style:{marginBottom:20}},void 0,T,E("p",{style:{fontSize:16,color:"#000"}},void 0,this.state.userProfile.email)):null,E(O.Row,{style:{marginBottom:20}},void 0,A,E("p",{style:{fontSize:16,color:"#000"}},void 0,this.state.isEditing?E(k,{style:{width:"100%",marginBottom:0}},void 0,n("gender",{rules:[{required:!0,message:"Пожалуйста, введите свой пол!"}],initialValue:this.state.genderInput})(E(O.Select,{onChange:this.onChangeGenderHandle,style:{minWidth:100}},void 0,D,B,L))):Object(j.c)(this.state.userProfile.gender))),E(O.Row,{style:{marginBottom:20}},void 0,N,E("p",{style:{fontSize:16,color:"#000"}},void 0,this.state.isEditing?E(k,{style:{width:"100%",marginBottom:0}},void 0,n("birthYear",{rules:[{required:!0,message:"Пожалуйста, введите дату рождения!"}],initialValue:Object(g.default)(new Date(this.state.birthYearInput).toLocaleString(),"DD.MM.YYYY")})(E(O.DatePicker,{onChange:this.onChangeBirthYearHandle,format:"DD.MM.YYYY",style:{width:"100%"}}))):this.state.userProfile.birthYear?(new Date(this.state.userProfile.birthYear).getDate()<10?"0"+new Date(this.state.userProfile.birthYear).getDate():new Date(this.state.userProfile.birthYear).getDate())+"."+(+new Date(this.state.userProfile.birthYear).getMonth()+1<10?"0"+ +(new Date(this.state.userProfile.birthYear).getMonth()+1):+new Date(this.state.userProfile.birthYear).getMonth()+1)+"."+(new Date(this.state.userProfile.birthYear).getFullYear()<1e3?"000"+new Date(this.state.userProfile.birthYear).getFullYear():new Date(this.state.userProfile.birthYear).getFullYear()):"Не указано")),this.state.teacherProfile?E(O.Row,{},void 0,E(O.Row,{style:{marginBottom:20}},void 0,H,E(O.Row,{gutter:6},void 0,E("p",{},void 0,this.state.teacherProfile.skills&&0!==this.state.teacherProfile.skills.length&&!this.state.isEditing?this.state.teacherProfile.skills.map(function(e){return E(C.Link,{to:"/groups?tags="+e.replace("#","*")},e,e," ")}):0!==this.state.teacherProfile.skills.length||this.state.isEditing||this.state.isCurrentUser?this.state.isCurrentUser&&!this.state.isEditing&&0===this.state.teacherProfile.skills.length?E("div",{},void 0,E("div",{style:{fontSize:16,color:"#000"}},void 0,"Не указано"),E("span",{onClick:function(){return e.setState({isEditing:!0})},style:{color:"#1890ff",marginTop:4,cursor:"pointer"}},void 0,"Теперь вы можете указать свои навыки!")):this.state.isEditing?E(k,{style:{width:"100%",marginBottom:0}},void 0,n("skills",{rules:[],initialValue:this.state.teacherProfile.skills})(E(O.Select,{onChange:this.onChangeSkillsHandle,style:{width:"100%"},onSearch:this.onHandleSearch,mode:"tags",placeholder:"Введите свои навыки",notFoundContent:null},void 0,this.props.tags&&this.props.tags.length?this.props.tags.map(function(e,t){return E(O.Select.Option,{},e,e)}):null))):null:E("div",{style:{fontSize:16,color:"#000"}},void 0,"Не указано"))))):null,E(O.Row,{style:{marginBottom:20}},void 0,Y,E("p",{className:"word-break",style:{fontSize:16,color:"#000"}},void 0,this.state.isEditing?E(k,{style:{width:"100%",marginBottom:0}},void 0,n("aboutUser",{rules:[{min:20,message:"Должно быть не менее 20 символов!"},{max:3e3,message:"Должно быть не более 3000 символов!"}],initialValue:this.state.aboutInput})(E(O.Input.TextArea,{onChange:this.onChangeAboutHandle,autosize:!0}))):this.state.userProfile.aboutUser?this.state.userProfile.aboutUser:"Не указано")),E(O.Row,{style:{marginBottom:20}},void 0,z,E("p",{},void 0,this.state.userProfile.contacts&&0!==this.state.userProfile.contacts.length&&!this.state.isEditing?this.state.userProfile.contacts.map(function(e,t){return E("a",{href:e,target:"_blank",className:"user-link",style:{fontSize:16,display:"block"}},t,e)}):this.state.isEditing?E("div",{},void 0,this.state.contactsInputs.map(function(t,r){return E("div",{},r,E(k,{style:{width:"100%",marginBottom:0}},void 0,n("link-"+r,{rules:[{pattern:/^(http:\/\/|https:\/\/)(t.me\/|telegram.me\/|vk.com\/|www.facebook.com\/|ok.ru\/profile\/|twitter.com\/#!\/|instagram.com\/|www.tumblr.com\/dashboard\/blog\/|www.behance.net\/|github.com\/)|api.whatsapp.com\/send\?phone=|viber:\/\/chat\?number=/,message:"Пожалуйста, введите действительное значение ссылки!"}]})(E("div",{},void 0,E(O.Col,{span:20},void 0,E(O.Input,{placeholder:"Ссылка на профиль",onChange:function(t){return e.onHandleChangeContact(t,r)},value:e.state.contactsInputs[r],style:{marginBottom:8,width:"100%"}})),E(O.Col,{span:4,style:{textAlign:"right"}},void 0,E(O.Icon,{className:"dynamic-delete-button",type:"close",onClick:function(){return e.removeContact(r)}}))))))}),this.state.contactsInputs.length<5?E(O.Button,{type:"dashed",onClick:this.addContact,style:{width:"100%",marginTop:8}},void 0,F,"Добавить ссылку"):null):E("div",{style:{fontSize:16,color:"#000"}},void 0,"Не указано"))),this.state.isEditing?E("div",{},void 0,E(O.Col,{span:24},void 0,E(O.Button,{type:"primary",htmlType:"submit",style:{width:"100%"}},void 0,"Подтвердить")),E(O.Col,{span:24},void 0,E(O.Button,{onClick:this.cancelChanges,style:{marginTop:6,width:"100%"}},void 0,"Отмена"))):null,!this.state.isEditing&&this.state.isCurrentUser?E(O.Button,{onClick:function(){return e.setState({isEditing:!0})},style:{width:"100%",marginTop:12}},void 0,"Редактировать"):null)),this.state.isCurrentUser?E("div",{style:{width:"100%"}},void 0,E(C.Link,{to:"/create_group"},void 0,E(O.Button,{type:"primary",style:{width:"100%",marginTop:12}},void 0,"Создать группу"))):null,this.state.isCurrentUser?this.state.teacherProfile?E(O.Button,{onClick:function(){e.props.makeNotTeacher()},style:{width:"100%",marginTop:12}},void 0,"Не преподавать"):E(O.Button,{type:"primary",onClick:function(){e.props.makeTeacher()},style:{width:"100%",marginTop:12}},void 0,"Преподавать"):null,this.state.isCurrentUser?null:E(O.Button,{onClick:this.onReportClick,style:{width:"100%",marginTop:12}},void 0,"Пожаловаться")),E(O.Col,{xs:{span:24},md:{span:12,offset:1},lg:{span:13,offset:1},xl:{span:15,offset:1},xxl:{span:17,offset:1},className:"lg-center-container-item xs-groups-tabs"},void 0,E(O.Tabs,{defaultActiveKey:"1",style:{width:"100%"}},void 0,E(R,{tab:"Группы"},"1",0!==this.props.myGroups.length?E("div",{className:"cards-holder md-cards-holder-center",style:{margin:"16px 0"}},void 0,"true"===localStorage.getItem("withoutServer")?x.map(function(e,t){return E(C.Link,{to:"/group/"+e.groupInfo.id},e.groupInfo.id,c.a.createElement(P.a,e))}):this.props.myGroups.map(function(e,t){return E(C.Link,{to:"/group/"+e.groupInfo.id},e.groupInfo.id,c.a.createElement(P.a,e))})):G),this.state.teacherProfile?E(R,{tab:"Профиль преподавателя",className:"teacher-panel",style:{margin:"16px 0"}},"2",this.state.teacherProfile.reviews&&0!==this.state.teacherProfile.reviews.length?this.state.teacherProfile.reviews.map(function(e,t){return E(O.Card,{hoverable:!0,className:"teacher-review"},t,E(O.Row,{type:"flex",justify:"space-between",align:"middle",style:{marginBottom:10}},void 0,E(O.Col,{style:{fontWeight:700,fontSize:16}},void 0,e.fromUser),E(O.Col,{style:{opacity:.7}},void 0,(new Date(e.date).getDate()<10?"0"+new Date(e.date).getDate():new Date(e.date).getDate())+"."+(new Date(e.date).getMonth()<10?"0"+new Date(e.date).getMonth():new Date(e.date).getMonth())+"."+new Date(e.date).getFullYear())),E(O.Row,{style:{marginBottom:2}},void 0,E(O.Col,{style:{fontWeight:500}},void 0,e.title)),E(O.Row,{},void 0,E(O.Col,{},void 0,e.text)))}):M):null,!this.state.userData||this.props.match.params.id!==this.state.userData.UserId||"Admin"!==this.state.userData.Role&&"Moderator"!==this.state.userData.Role?null:E(R,{tab:"Панель администратора",style:{minHeight:300}},"3",E(C.Link,{to:"/admin/"+this.props.match.params.id,style:{color:"#747474"}},void 0,E("div",{style:{textAlign:"center",fontSize:26,padding:"100px 0"}},void 0,V,E(O.Icon,{type:"bar-chart",style:{fontSize:60,marginTop:20,display:"block"}}))))))),E(I.a,{visible:this.state.reportVisible,handleCancel:this.handleReportCancel,userId:this.props.match.params.id,username:this.state.userProfile.name}))}}]),n}(c.a.Component);J.defaultProps={};var K=Object(d.b)({myGroups:Object(m.c)(),needUpdate:Object(m.a)(),tags:Object(m.b)()}),q=Object(l.b)(K,i),W=Object(h.a)({key:"profilePage",reducer:v.a}),$=Object(f.a)({key:"profilePage",saga:y.a});t.default=Object(p.c)(W,$,q)(O.Form.create()(J))}.call(t,n("./node_modules/exports-loader/index.js?self.fetch!./node_modules/whatwg-fetch/fetch.js"))},"./app/containers/ProfilePage/reducer.js":function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case o.v:return e.set("pending",!0);case o.x:return e.set("pending",!1).set("groups",t.groups);case o.w:return e.set("pending",!1).set("error",!0);case o.q:return e.set("pending",!0).set("needUpdate",!0);case o.r:return localStorage.getItem("name")===t.newName&&localStorage.getItem("avatarLink")===t.newAvatarLink||(localStorage.setItem("name",t.newName),localStorage.setItem("avatarLink",t.newAvatarLink),location.reload()),e.set("pending",!1).set("needUpdate",!1);case o.p:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.m:return e.set("pending",!0).set("needUpdate",!0);case o.o:return location.reload(),e.set("pending",!1).set("needUpdate",!1);case o.n:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.a:return e.set("pending",!0).set("needUpdate",!0);case o.c:return e.set("pending",!1).set("needUpdate",!1);case o.b:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.d:return e.set("pending",!0).set("needUpdate",!0);case o.f:return e.set("pending",!1).set("needUpdate",!1);case o.e:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.j:return e.set("pending",!0).set("needUpdate",!0);case o.l:return e.set("pending",!1).set("needUpdate",!1);case o.k:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.g:return e.set("pending",!0).set("needUpdate",!0);case o.i:return e.set("pending",!1).set("needUpdate",!1);case o.h:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.H:return e.set("pending",!0).set("needUpdate",!0);case o.J:return localStorage.setItem("isTeacher",!0),e.set("pending",!1).set("needUpdate",!1);case o.I:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.B:return e.set("pending",!0).set("needUpdate",!0);case o.D:return localStorage.setItem("isTeacher",!1),e.set("pending",!1).set("needUpdate",!1);case o.C:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.t:return e.set("pending",!0).set("needUpdate",!0);case o.u:return e.set("pending",!1).set("needUpdate",!1);case o.s:return e.set("pending",!1).set("error",!0).set("needUpdate",!1);case o.F:return e.set("pending",!0);case o.G:return i.message.success("Жалоба отправлена!"),e.set("pending",!1);case o.E:return e.set("pending",!1).set("error",!0);case o.z:return e.set("pending",!0);case o.A:return e.set("tags",t.tags).set("pending",!1);case o.y:return e.set("pending",!1).set("error",!0);default:return e}}var a=n("./node_modules/immutable/dist/immutable.js"),o=(n.n(a),n("./app/containers/ProfilePage/constants.js")),i=n("./node_modules/antd/lib/index.js"),s=(n.n(i),Object(a.fromJS)({groups:[],tags:[],needUpdate:!1,pending:!1,error:!1}));t.a=r},"./app/containers/ProfilePage/saga.js":function(e,t,n){"use strict";(function(e){function r(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(w.a)(a,e.id);case 3:return t=n.sent,n.next=6,Object(w.b)(Object(R.x)(t.groups));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(w.b)(Object(R.w)(n.t0));case 12:case"end":return n.stop()}},x,this,[[0,8]])}function a(t){return e(U.a.API_BASE_URL+"/user/profile/groups/"+t,{method:"GET",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e})}function o(e){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w.a)(i);case 3:return e.next=5,Object(w.b)(Object(R.J)());case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(w.b)(Object(R.I)(e.t0));case 11:case"end":return e.stop()}},T,this,[[0,7]])}function i(){return e(U.a.API_BASE_URL+"/user/profile/teaching",{method:"POST",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).catch(function(e){return e})}function s(e){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w.a)(c);case 3:return e.next=5,Object(w.b)(Object(R.D)());case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(w.b)(Object(R.C)(e.t0));case 11:case"end":return e.stop()}},A,this,[[0,7]])}function c(){return e(U.a.API_BASE_URL+"/user/profile/teaching",{method:"DELETE",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).catch(function(e){return e})}function u(e){var t,n,r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e;case 3:return t=a.sent,n=t.name,r=t.avatarLink,a.next=8,Object(w.a)(l,n,e.aboutUser,e.gender,e.contacts,e.birthYear,r);case 8:return a.next=10,Object(w.b)(Object(R.o)(n,r));case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(0),a.next=16,Object(w.b)(Object(R.n)(a.t0));case 16:case"end":return a.stop()}},D,this,[[0,12]])}function l(t,n,r,a,o,i){return e(U.a.API_BASE_URL+"/user/profile",{method:"PUT",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({name:t,aboutUser:n,gender:r,contacts:a,birthYear:o,avatarLink:i})}).then(function(e){return e.json()}).catch(function(e){return e})}function d(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(w.a)(p,e.username);case 3:return t.next=5,Object(w.b)(Object(R.u)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(w.b)(Object(R.t)(t.t0));case 11:case"end":return t.stop()}},B,this,[[0,7]])}function p(t){return e(U.a.API_BASE_URL+"/user/profile/name",{method:"PUT",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({userName:t})}).then(function(e){return e.json()}).catch(function(e){return e})}function f(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(w.a)(h,e.aboutUser);case 3:return t.next=5,Object(w.b)(Object(R.c)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(w.b)(Object(R.b)(t.t0));case 11:case"end":return t.stop()}},L,this,[[0,7]])}function h(t){return e(U.a.API_BASE_URL+"/user/profile/about",{method:"PUT",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({aboutUser:t})}).then(function(e){return e.json()}).catch(function(e){return e})}function g(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(w.a)(m,e.gender);case 3:return t.next=5,Object(w.b)(Object(R.l)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(w.b)(Object(R.k)(t.t0));case 11:case"end":return t.stop()}},N,this,[[0,7]])}function m(t){return e(U.a.API_BASE_URL+"/user/profile/gender",{method:"PUT",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({gender:t})}).then(function(e){return e.json()}).catch(function(e){return e})}function b(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(w.a)(v,e.birthYear);case 3:return t.next=5,Object(w.b)(Object(R.f)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(w.b)(Object(R.e)(t.t0));case 11:case"end":return t.stop()}},H,this,[[0,7]])}function v(t){return e(U.a.API_BASE_URL+"/user/profile/birthyear",{method:"PUT",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({birthYear:t})}).then(function(e){return e.json()}).catch(function(e){return e})}function y(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(w.a)(j,e.contacts);case 3:return t.next=5,Object(w.b)(Object(R.i)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(w.b)(Object(R.h)(t.t0));case 11:case"end":return t.stop()}},Y,this,[[0,7]])}function j(t){return e(U.a.API_BASE_URL+"/user/profile/contacts",{method:"PUT",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({contacts:t})}).then(function(e){return e.json()}).catch(function(e){return e})}function S(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(w.a)(C,e.skills);case 3:return t.next=5,Object(w.b)(Object(R.r)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(w.b)(Object(R.q)(t.t0));case 11:case"end":return t.stop()}},z,this,[[0,7]])}function C(t){return e(U.a.API_BASE_URL+"/user/profile/teaching/skills",{method:"PUT",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({newSkills:t})}).then(function(e){return e.json()}).catch(function(e){return e})}function P(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(w.a)(I,e.userId,e.reason,e.description);case 3:return t.next=5,Object(w.b)(Object(R.G)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(w.b)(Object(R.F)(t.t0));case 11:case"end":return t.stop()}},F,this,[[0,7]])}function I(t,n,r){return e(U.a.API_BASE_URL+"/users/"+t+"/report",{method:"POST",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({reason:n,description:r})}).then(function(e){return e.json()}).catch(function(e){return e})}function O(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(w.a)(_,e.tag);case 3:return t=n.sent,n.next=6,Object(w.b)(Object(R.A)(t.map(function(e){return e.tag})));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(w.b)(Object(R.z)(n.t0));case 12:case"end":return n.stop()}},G,this,[[0,8]])}function _(t){return e(U.a.API_BASE_URL+"/tags/search"+(t?"?tag="+t:"")).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e})}function E(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.c)(k.v,r);case 2:return e.next=4,Object(w.c)(k.m,d);case 4:return e.next=6,Object(w.c)(k.a,f);case 6:return e.next=8,Object(w.c)(k.j,g);case 8:return e.next=10,Object(w.c)(k.d,b);case 10:return e.next=12,Object(w.c)(k.g,y);case 12:return e.next=14,Object(w.c)(k.H,o);case 14:return e.next=16,Object(w.c)(k.B,s);case 16:return e.next=18,Object(w.c)(k.q,u);case 18:return e.next=20,Object(w.c)(k.t,S);case 20:return e.next=22,Object(w.c)(k.F,P);case 22:return e.next=24,Object(w.c)(k.z,O);case 24:case"end":return e.stop()}},M,this)}t.a=E;var w=n("./node_modules/redux-saga/es/effects.js"),k=n("./app/containers/ProfilePage/constants.js"),R=n("./app/containers/ProfilePage/actions.js"),U=n("./app/config.js"),x=regeneratorRuntime.mark(r),T=regeneratorRuntime.mark(o),A=regeneratorRuntime.mark(s),D=regeneratorRuntime.mark(u),B=regeneratorRuntime.mark(d),L=regeneratorRuntime.mark(f),N=regeneratorRuntime.mark(g),H=regeneratorRuntime.mark(b),Y=regeneratorRuntime.mark(y),z=regeneratorRuntime.mark(S),F=regeneratorRuntime.mark(P),G=regeneratorRuntime.mark(O),M=regeneratorRuntime.mark(E)}).call(t,n("./node_modules/exports-loader/index.js?self.fetch!./node_modules/whatwg-fetch/fetch.js"))},"./app/containers/ProfilePage/selectors.js":function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n("./node_modules/reselect/es/index.js"),a=function(e){return e.get("profilePage")},o=function(){return Object(r.a)(a,function(e){return e.get("groups")})},i=function(){return Object(r.a)(a,function(e){return e.get("needUpdate")})},s=function(){return Object(r.a)(a,function(e){return e.get("tags")})}}});