webpackJsonp([1],{"./app/components/Chat/Loadable.js":function(e,t,n){"use strict";var o=n("./node_modules/react-loadable/lib/index.js"),i=n.n(o);t.a=i()({loader:function(){return n.e(7).then(n.bind(null,"./app/components/Chat/index.js"))},loading:function(){return null}})},"./app/components/MembersList/Loadable.js":function(e,t,n){"use strict";var o=n("./node_modules/react-loadable/lib/index.js"),i=n.n(o);t.a=i()({loader:function(){return n.e(6).then(n.bind(null,"./app/components/MembersList/index.js"))},loading:function(){return null}})},"./app/containers/GroupPage/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{dispatch:e}}n.d(t,"GroupPage",function(){return O});var a=n("./node_modules/react/react.js"),u=n.n(a),l=n("./node_modules/prop-types/index.js"),c=(n.n(l),n("./node_modules/react-redux/es/index.js")),d=n("./node_modules/reselect/es/index.js"),p=n("./node_modules/redux/es/index.js"),m=n("./app/utils/injectSaga.js"),f=n("./app/utils/injectReducer.js"),v=n("./app/containers/GroupPage/reducer.js"),h=n("./app/containers/GroupPage/saga.js"),g=n("./node_modules/antd/lib/index.js"),b=(n.n(g),n("./app/config.js")),y=n("./app/components/MembersList/Loadable.js"),j=n("./app/components/Chat/Loadable.js"),I=n("./node_modules/react-router-dom/index.js"),w=(n.n(I),n("./node_modules/react-dom/index.js")),_=(n.n(w),n("./app/globaljs.js")),P=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,i){var r=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&r)for(var a in r)void 0===n[a]&&(n[a]=r[a]);else n||(n=r||{});if(1===s)n.children=i;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),k=P("div",{},void 0,"Данной группы не существует"),C=P(g.Col,{},void 0,"Формат"),x=P(g.Col,{},void 0,"Стоимость"),R=P(g.Col,{},void 0,"Эта группа является приватной"),G=P(g.Col,{},void 0,"Эта группа не является приватной"),O=function(t){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleVisibleChange=function(e){t.setState({inviteVisible:e})},t.inviteMenu=P(g.Menu,{},void 0,P(g.Menu.Item,{className:"unhover"},"0",u.a.createElement(g.Input,{onPressEnter:t.inviteMember,ref:function(e){return t.inviteInput=e},placeholder:"Введите id пользователя"}))),t.state={id:t.props.match.params.id,isPrivate:!0,teacher:null,title:"Название группы",description:"Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. ",isActive:!0,tags:["js","c#"],members:[{member:{userId:"string",memberRole:"Создатель",paid:!0,acceptedCourse:!1},name:"Первый пользователь",avatarLink:"string"},{member:{userId:"string",memberRole:"Участник",paid:!0,acceptedCourse:!1},name:"Второй пользователь",avatarLink:"string"}],moneyPerUser:600,size:10,groupType:"Лекция",isInGroup:!1,inviteVisible:!1,userToken:null},t.onSetResult=t.onSetResult.bind(t),t.inviteMember=t.inviteMember.bind(t),t.leaveGroup=t.leaveGroup.bind(t),t.enterGroup=t.enterGroup.bind(t),t.handleVisibleChange=t.handleVisibleChange.bind(t),t.tryInvite=t.tryInvite.bind(t),t}return r(n,t),S(n,[{key:"componentDidMount",value:function(){var t=this;Boolean(localStorage.getItem("without_server"))||e(b.a.API_BASE_URL+"/group/"+this.state.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){return t.onSetResult(e)}).catch(function(e){return e}),this.setState({userToken:Object(_.a)(localStorage.getItem("token"))}),this.setState({isInGroup:this.state.members.find(function(e){return e.userId===t.state.userToken.UserId})})}},{key:"onSetResult",value:function(e){this.setState({title:e.groupInfo.title,members:e.members,isActive:e.groupInfo.isActive,size:e.groupInfo.size,moneyPerUser:e.groupInfo.moneyPerUser,groupType:e.groupInfo.groupType,tags:e.groupInfo.tags,description:e.groupInfo.description,isPrivate:e.groupInfo.isPrivate,teacher:e.teacher})}},{key:"tryInvite",value:function(){this.state.inviteVisible&&""!==w.findDOMNode(this.inviteInput).value&&(this.inviteMember(),w.findDOMNode(this.inviteInput).value="")}},{key:"inviteMember",value:function(){Boolean(localStorage.getItem("without_server"))?g.message.success("Приглашение отправлено"):e(b.a.API_BASE_URL+"/group/"+this.state.id+"/member/invite/"+w.findDOMNode(this.inviteInput).value,{headers:{Method:"POST",Authorization:"Bearer "+localStorage.getItem("token")}}).catch(function(e){return e})}},{key:"leaveGroup",value:function(){this.setState({isInGroup:!1})}},{key:"enterGroup",value:function(){this.setState({isInGroup:!0})}},{key:"render",value:function(){return this.state.isActive?P("div",{},void 0,P(g.Col,{span:20,offset:2,style:{marginTop:40,marginBottom:60,fontSize:16},className:"md-center-container"},void 0,P(g.Col,{className:"md-offset-16px",md:{span:10},lg:{span:7}},void 0,P(g.Row,{style:{width:248}},void 0,P(g.Row,{style:{marginBottom:26}},void 0,P("h3",{style:{margin:0,fontSize:22}},void 0,this.state.title),this.state.teacher?P("span",{style:{color:"rgba(0,0,0,0.6)"}},void 0,"Преподаватель найден"):P("span",{style:{color:"rgba(0,0,0,0.6)"}},void 0,"Идет поиск преподавателя")),P(g.Row,{gutter:6,type:"flex",justify:"start",style:{marginBottom:8}},void 0,this.state.tags.map(function(e){return P(I.Link,{to:"#"},void 0,e)})),P(g.Row,{type:"flex",justify:"space-between",style:{marginBottom:8}},void 0,C,P(g.Col,{},void 0,this.state.groupType)),P(g.Row,{type:"flex",justify:"space-between",style:{marginBottom:8}},void 0,x,P(g.Col,{},void 0,this.state.moneyPerUser," руб.")),P(g.Row,{type:"flex",justify:"flex-start",style:{marginBottom:12}},void 0,this.state.isPrivate?R:G)),P(g.Row,{style:{marginLeft:-16,marginBottom:20}},void 0,P(y.a,{members:this.state.members,size:this.state.size})),P(g.Row,{className:"md-center-container"},void 0,P(g.Dropdown,{overlay:this.inviteMenu,onVisibleChange:this.handleVisibleChange,visible:this.state.inviteVisible,trigger:["click"]},void 0,P(g.Button,{size:"large",style:{width:280,marginLeft:-16},type:"primary",onClick:this.tryInvite},void 0,"Пригласить")))),P(g.Col,{sm:{span:24},md:{span:13,offset:1},lg:{span:16,offset:1}},void 0,P(g.Row,{className:"md-center-container",style:{textAlign:"right",marginTop:8}},void 0,this.state.isInGroup?P(g.Button,{onClick:this.leaveGroup},void 0,"Покинуть группу"):P(g.Button,{type:"primary",onClick:this.enterGroup},void 0,"Вступить в группу")),P(g.Row,{style:{marginTop:42}},void 0,P(g.Col,{},void 0,P("h3",{style:{fontSize:18}},void 0,"Описание"))),P(g.Row,{style:{marginBottom:40}},void 0,P("p",{},void 0,this.state.description)),P(g.Row,{},void 0,P(j.a,{isInGroup:this.state.isInGroup}))))):k}}]),n}(u.a.Component),M=Object(d.b)({}),B=Object(c.b)(M,s),L=Object(f.a)({key:"groupPage",reducer:v.a}),T=Object(m.a)({key:"groupPage",saga:h.a});t.default=Object(p.c)(L,T,B)(O)}.call(t,n("./node_modules/exports-loader/index.js?self.fetch!./node_modules/whatwg-fetch/fetch.js"))},"./app/containers/GroupPage/reducer.js":function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;switch(arguments[1].type){case r:default:return e}}var i=n("./node_modules/immutable/dist/immutable.js"),r="app/GroupPage/DEFAULT_ACTION",s=Object(i.fromJS)({});t.a=o},"./app/containers/GroupPage/saga.js":function(e,t,n){"use strict";function o(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},i,this)}t.a=o;var i=regeneratorRuntime.mark(o)}});