webpackJsonp([2],{"./app/components/Chat/Loadable.js":function(e,t,n){"use strict";var o=n("./node_modules/react-loadable/lib/index.js"),i=n.n(o);t.a=i()({loader:function(){return n.e(8).then(n.bind(null,"./app/components/Chat/index.js"))},loading:function(){return null}})},"./app/components/MembersList/Loadable.js":function(e,t,n){"use strict";var o=n("./node_modules/react-loadable/lib/index.js"),i=n.n(o);t.a=i()({loader:function(){return n.e(7).then(n.bind(null,"./app/components/MembersList/index.js"))},loading:function(){return null}})},"./app/containers/GroupPage/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{dispatch:e}}n.d(t,"GroupPage",function(){return L});var s=n("./node_modules/react/react.js"),u=n.n(s),l=n("./node_modules/prop-types/index.js"),c=(n.n(l),n("./node_modules/react-redux/es/index.js")),d=n("./node_modules/reselect/es/index.js"),p=n("./node_modules/redux/es/index.js"),m=n("./app/utils/injectSaga.js"),f=n("./app/utils/injectReducer.js"),h=n("./app/containers/GroupPage/reducer.js"),g=n("./app/containers/GroupPage/saga.js"),v=n("./node_modules/antd/lib/index.js"),b=(n.n(v),n("./app/config.js")),y=n("./app/components/MembersList/Loadable.js"),j=n("./app/components/Chat/Loadable.js"),w=n("./node_modules/react-router-dom/index.js"),S=(n.n(w),n("./node_modules/react-dom/index.js")),I=(n.n(S),n("./app/globaljs.js")),C=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,i){var r=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&r)for(var s in r)void 0===n[s]&&(n[s]=r[s]);else n||(n=r||{});if(1===a)n.children=i;else if(a>1){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),P={groupInfo:{isPrivate:!0,title:"Название группы",description:"Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. ",isActive:!0,tags:["js","c#"],moneyPerUser:600,size:10,groupType:"Лекция"},members:[{member:{userId:"848a3202-7085-4cba-842f-07d07eff7b35",memberRole:"Создатель",paid:!0,acceptedCourse:!1},name:"Первый пользователь",avatarLink:"string"},{member:{userId:"string",memberRole:"Участник",paid:!0,acceptedCourse:!1},name:"Второй пользователь",avatarLink:"string"}],teacher:null},x=["Первый пользователь","Второй пользователь"],R=C(v.Col,{},void 0,"Формат"),G=C(v.Col,{},void 0,"Стоимость"),k=C(v.Col,{},void 0,"Эта группа является приватной"),O=C(v.Col,{},void 0,"Эта группа не является приватной"),A=C("div",{},void 0,"Данной группы не существует"),L=function(t){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleVisibleChange=function(e){t.setState({inviteVisible:e})},t.fetchData=function(e,t){"true"===localStorage.getItem("without_server")&&t(x)},t.handleSelectChange=function(e){t.setState({selectValue:e}),t.fetchData(e,function(e){return t.setState({selectData:e})}),""===e&&t.setState({selectData:[]})},t.inviteMenu=function(e){return C(v.Menu,{},void 0,C(v.Menu.Item,{className:"unhover"},"0",C(v.Select,{mode:"combobox",style:{width:"100%"},value:t.state.selectValue,placeholder:"Введите имя пользователя",defaultActiveFirstOption:!1,showArrow:!1,notFoundContent:"Нет совпадений",onSelect:t.inviteMember,onChange:t.handleSelectChange},void 0,e.map(function(e){return C(v.Select.Option,{},e,e)}))))},t.state={id:t.props.match.params.id,title:"",isActive:null,size:0,moneyPerUser:0,groupType:"",tags:[],description:"",isPrivate:null,members:[],teacher:null,isInGroup:!1,inviteVisible:!1,userData:localStorage.getItem("token")?Object(I.a)(localStorage.getItem("token")):null,selectData:[],selectValue:""},t.onSetResult=t.onSetResult.bind(t),t.inviteMember=t.inviteMember.bind(t),t.leaveGroup=t.leaveGroup.bind(t),t.enterGroup=t.enterGroup.bind(t),t.handleVisibleChange=t.handleVisibleChange.bind(t),t.fetchData=t.fetchData.bind(t),t.handleSelectChange=t.handleSelectChange.bind(t),t}return r(n,t),_(n,[{key:"componentDidMount",value:function(){var t=this;"true"===localStorage.getItem("without_server")?this.onSetResult(P):e(b.a.API_BASE_URL+"/group/"+this.state.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){t.onSetResult(e)}).catch(function(e){return e})}},{key:"onSetResult",value:function(e){var t=this;this.setState({title:e.groupInfo.title,isActive:e.groupInfo.isActive,size:e.groupInfo.size,moneyPerUser:e.groupInfo.moneyPerUser,groupType:e.groupInfo.groupType,tags:e.groupInfo.tags,description:e.groupInfo.description,isPrivate:e.groupInfo.isPrivate,members:e.members,teacher:e.teacher,isInGroup:e.members.find(function(e){return e.member.userId===t.state.userData.UserId})})}},{key:"inviteMember",value:function(){"true"===localStorage.getItem("without_server")?v.message.success("Приглашение отправлено"):e(b.a.API_LOCAL_URL+"/group/"+this.state.id+"/member/invite/"+this.state.selectValue,{headers:{Method:"POST",Authorization:"Bearer "+localStorage.getItem("token")}}).catch(function(e){return e}),this.setState({selectValue:""})}},{key:"leaveGroup",value:function(){this.setState({isInGroup:!1})}},{key:"enterGroup",value:function(){this.setState({isInGroup:!0})}},{key:"render",value:function(){var e=this;return this.state.isActive?C("div",{},void 0,C(v.Col,{span:20,offset:2,style:{marginTop:40,marginBottom:60,fontSize:16},className:"md-center-container"},void 0,C(v.Col,{className:"md-offset-16px",md:{span:10},lg:{span:7}},void 0,C(v.Row,{style:{width:248}},void 0,C(v.Row,{style:{marginBottom:26}},void 0,C("h3",{style:{margin:0,fontSize:22}},void 0,this.state.title),this.state.teacher?C("span",{style:{color:"rgba(0,0,0,0.6)"}},void 0,"Преподаватель найден"):C("span",{style:{color:"rgba(0,0,0,0.6)"}},void 0,"Идет поиск преподавателя")),C(v.Row,{gutter:6,type:"flex",justify:"start",style:{marginBottom:8}},void 0,this.state.tags.map(function(e){return C(w.Link,{to:"#"},void 0,e)})),C(v.Row,{type:"flex",justify:"space-between",style:{marginBottom:8}},void 0,R,C(v.Col,{},void 0,this.state.groupType)),C(v.Row,{type:"flex",justify:"space-between",style:{marginBottom:8}},void 0,G,C(v.Col,{},void 0,this.state.moneyPerUser," руб.")),C(v.Row,{type:"flex",justify:"flex-start",style:{marginBottom:12}},void 0,this.state.isPrivate?k:O)),C(v.Row,{style:{marginLeft:-16,marginBottom:20}},void 0,C(y.a,{members:this.state.members,size:this.state.size,isInGroup:this.state.isInGroup})),this.state.isInGroup&&"Создатель"===this.state.members.find(function(t){return t.member.userId===e.state.userData.UserId}).member.memberRole?C(v.Row,{className:"md-center-container"},void 0,C(v.Dropdown,{overlay:this.inviteMenu(this.state.selectData),onVisibleChange:this.handleVisibleChange,visible:this.state.inviteVisible,trigger:["click"]},void 0,C(v.Button,{size:"large",style:{width:280,marginLeft:-16},type:"primary"},void 0,"Пригласить"))):null),C(v.Col,{sm:{span:24},md:{span:13,offset:1},lg:{span:16,offset:1}},void 0,C(v.Row,{className:"md-center-container",style:{textAlign:"right",marginTop:8}},void 0,this.state.isInGroup?C(v.Button,{onClick:this.leaveGroup},void 0,"Покинуть группу"):C(v.Button,{type:"primary",onClick:this.enterGroup},void 0,"Вступить в группу")),C(v.Row,{style:{marginTop:42}},void 0,C(v.Col,{},void 0,C("h3",{style:{fontSize:18}},void 0,"Описание"))),C(v.Row,{style:{marginBottom:40}},void 0,C("p",{},void 0,this.state.description)),C(v.Row,{},void 0,C(j.a,{isInGroup:this.state.isInGroup}))))):A}}]),n}(u.a.Component),B=Object(d.b)({}),D=Object(c.b)(B,a),M=Object(f.a)({key:"groupPage",reducer:h.a}),T=Object(m.a)({key:"groupPage",saga:g.a});t.default=Object(p.c)(M,T,D)(L)}.call(t,n("./node_modules/exports-loader/index.js?self.fetch!./node_modules/whatwg-fetch/fetch.js"))},"./app/containers/GroupPage/reducer.js":function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;switch(arguments[1].type){case r:default:return e}}var i=n("./node_modules/immutable/dist/immutable.js"),r="app/GroupPage/DEFAULT_ACTION",a=Object(i.fromJS)({});t.a=o},"./app/containers/GroupPage/saga.js":function(e,t,n){"use strict";function o(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},i,this)}t.a=o;var i=regeneratorRuntime.mark(o)}});