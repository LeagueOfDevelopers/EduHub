webpackJsonp([0],{"./app/components/Chat/Loadable.js":function(e,t,n){"use strict";var r=n("./node_modules/react-loadable/lib/index.js"),o=n.n(r);t.a=o()({loader:function(){return n.e(10).then(n.bind(null,"./app/components/Chat/index.js"))},loading:function(){return null}})},"./app/components/InviteMemberSelect/Loadable.js":function(e,t,n){"use strict";var r=n("./node_modules/react-loadable/lib/index.js"),o=n.n(r);t.a=o()({loader:function(){return n.e(9).then(n.bind(null,"./app/components/InviteMemberSelect/index.js"))},loading:function(){return null}})},"./app/components/MembersList/Loadable.js":function(e,t,n){"use strict";var r=n("./node_modules/react-loadable/lib/index.js"),o=n.n(r);t.a=o()({loader:function(){return n.e(8).then(n.bind(null,"./app/components/MembersList/index.js"))},loading:function(){return null}})},"./app/containers/GroupPage/actions.js":function(e,t,n){"use strict";function r(e){return{type:l.b,groupId:e}}function o(){return{type:l.c}}function a(e){return{type:l.a,error:e}}function s(e,t){return{type:l.k,groupId:e,memberId:t}}function i(){return{type:l.l}}function u(e){return{type:l.j,error:e}}function c(e,t,n){return{type:l.h,groupId:e,invitedId:t,role:n}}function p(){return{type:l.i}}function d(e){return{type:l.g,error:e}}t.a=r,t.c=o,t.b=a,t.g=s,t.i=i,t.h=u,t.d=c,t.f=p,t.e=d;var l=n("./app/containers/GroupPage/constants.js")},"./app/containers/GroupPage/constants.js":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"k",function(){return s}),n.d(t,"l",function(){return i}),n.d(t,"j",function(){return u}),n.d(t,"h",function(){return c}),n.d(t,"i",function(){return p}),n.d(t,"g",function(){return d});var r="ENTER_GROUP_START",o="ENTER_GROUP_SUCCESS",a="ENTER_GROUP_FAILED",s="LEAVE_GROUP_START",i="LEAVE_GROUP_SUCCESS",u="LEAVE_GROUP_FAILED",c="INVITE_MEMBER_START",p="INVITE_MEMBER_SUCCESS",d="INVITE_MEMBER_FAILED"},"./app/containers/GroupPage/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{enterGroup:function(t){return e(Object(j.a)(t))},leaveGroup:function(t,n){return e(Object(j.g)(t,n))}}}n.d(t,"GroupPage",function(){return T});var i=n("./node_modules/react/react.js"),u=n.n(i),c=n("./node_modules/prop-types/index.js"),p=(n.n(c),n("./node_modules/react-redux/es/index.js")),d=n("./node_modules/reselect/es/index.js"),l=n("./node_modules/redux/es/index.js"),f=n("./app/utils/injectSaga.js"),g=n("./app/utils/injectReducer.js"),m=n("./app/containers/GroupPage/reducer.js"),b=n("./app/containers/GroupPage/saga.js"),j=n("./app/containers/GroupPage/actions.js"),h=(n("./app/containers/Header/actions.js"),n("./app/containers/Header/selectors.js"),n("./node_modules/react-router-dom/index.js")),v=(n.n(h),n("./app/config.js")),y=n("./app/globalJS.js"),_=n("./node_modules/antd/lib/index.js"),S=(n.n(_),n("./app/components/MembersList/Loadable.js")),I=n("./app/components/Chat/Loadable.js"),R=n("./app/components/InviteMemberSelect/Loadable.js"),x=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var a=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&a)for(var i in a)void 0===n[i]&&(n[i]=a[i]);else n||(n=a||{});if(1===s)n.children=o;else if(s>1){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+3];n.children=u}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=x(_.Col,{},void 0,"Формат"),C=x(_.Col,{},void 0,"Стоимость"),E=x(_.Col,{},void 0,"Эта группа является приватной"),P=x(_.Col,{},void 0,"Эта группа не является приватной"),G=x(_.Row,{className:"md-center-container"},void 0,x(R.a,{})),T=function(t){function n(t){r(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return a.getCurrentGroup=function(){"true"!==localStorage.getItem("without_server")?e(v.a.API_BASE_URL+"/group/"+a.state.id,{headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){return a.onSetResult(e)}).catch(function(e){return e}):a.onSetResult(a.props.groupData)},a.state={id:a.props.match.params.id,groupData:{groupInfo:{isPrivate:!0,title:"",description:"",isActive:!0,tags:[],moneyPerUser:null,size:null,groupType:""},members:[],educator:null},userData:localStorage.getItem("token")?Object(y.c)(localStorage.getItem("token")):null,isInGroup:!1,isCreator:!1},a.onSetResult=a.onSetResult.bind(a),a.getCurrentGroup=a.getCurrentGroup.bind(a),a}return a(n,t),O(n,[{key:"componentDidMount",value:function(){this.getCurrentGroup()}},{key:"onSetResult",value:function(e){var t=this;this.setState({groupData:e,isInGroup:!!this.state.userData&&Boolean(e.members.find(function(e){return e.userId===t.state.userData.UserId}))}),this.setState({isCreator:!!this.state.isInGroup&&"Создатель"===Object(y.b)(e.members.find(function(e){return e.userId===t.state.userData.UserId}).memberRole)})}},{key:"render",value:function(){var e=this;return this.state.groupData.groupInfo.isActive?x("div",{},void 0,x(_.Col,{span:20,offset:2,style:{marginTop:40,marginBottom:160,fontSize:16},className:"md-center-container"},void 0,x(_.Col,{className:"md-offset-16px",md:{span:10},lg:{span:7}},void 0,x(_.Row,{style:{width:248}},void 0,x(_.Row,{style:{marginBottom:26}},void 0,x("h3",{style:{margin:0,fontSize:22}},void 0,this.state.groupData.groupInfo.title),this.state.groupData.educator?x("span",{style:{color:"rgba(0,0,0,0.6)"}},void 0,"Преподаватель найден"):x("span",{style:{color:"rgba(0,0,0,0.6)"}},void 0,"Идет поиск преподавателя")),x(_.Row,{gutter:6,type:"flex",justify:"start",style:{marginBottom:8}},void 0,this.state.groupData.groupInfo.tags.map(function(e){return x(h.Link,{to:"#"},e,e)})),x(_.Row,{type:"flex",justify:"space-between",style:{marginBottom:8}},void 0,w,x(_.Col,{},void 0,Object(y.a)(this.state.groupData.groupInfo.groupType))),x(_.Row,{type:"flex",justify:"space-between",style:{marginBottom:8}},void 0,C,x(_.Col,{},void 0,this.state.groupData.groupInfo.moneyPerUser," руб.")),x(_.Row,{type:"flex",justify:"flex-start",style:{marginBottom:12}},void 0,this.state.groupData.groupInfo.isPrivate?E:P)),x(_.Row,{style:{marginLeft:-16,marginBottom:20}},void 0,x(S.a,{members:this.state.groupData.members,size:this.state.groupData.groupInfo.size,isCreator:this.state.isCreator})),x(_.Row,{},void 0,this.state.isCreator?G:null)),x(_.Col,{xs:{span:24},md:{span:13,offset:1},lg:{span:15,offset:2},xl:{span:16,offset:1}},void 0,x(_.Row,{className:"md-center-container",style:{textAlign:"right",marginTop:8}},void 0,this.state.isInGroup?x(_.Button,{onClick:function(){return e.props.leaveGroup(e.state.id,e.state.userData.UserId)}},void 0,"Покинуть группу"):x(_.Button,{type:"primary",onClick:function(){return e.props.enterGroup(e.state.id)}},void 0,"Вступить в группу")),x(_.Row,{},void 0,x(_.Row,{style:{marginTop:42}},void 0,x(_.Col,{},void 0,x("h3",{style:{fontSize:18}},void 0,"Описание"))),x(_.Row,{style:{marginBottom:40}},void 0,x("p",{},void 0,this.state.groupData.groupInfo.description))),x(_.Row,{style:{width:"100%"}},void 0,x(I.a,{isInGroup:this.state.isInGroup}))))):x(_.Row,{type:"flex",justify:"center",style:{marginTop:20}},void 0,"Данной группы не существует")}}]),n}(u.a.Component);T.defaultProps={groupData:"true"===localStorage.getItem("withoutServer")?{groupInfo:{isPrivate:!0,title:"Название группы",description:"Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. Описание группы. ",isActive:!0,tags:["js","c#"],moneyPerUser:600,size:10,groupType:"Лекция"},members:[{member:{userId:"848a3202-7085-4cba-842f-07d07eff7b35",memberRole:3,paid:!0,acceptedCourse:!1},name:"Первый пользователь",avatarLink:"string"},{member:{userId:"string",memberRole:1,paid:!0,acceptedCourse:!1},name:"Второй пользователь",avatarLink:"string"}],educator:null}:{},users:"true"===localStorage.getItem("withoutServer")?["Первый пользователь","Второй пользователь"]:[]};var k=Object(d.b)({}),A=Object(p.b)(k,s),L=Object(g.a)({key:"groupPage",reducer:m.a}),D=Object(f.a)({key:"groupPage",saga:b.a});t.default=Object(l.c)(L,D,A)(T)}.call(t,n("./node_modules/exports-loader/index.js?self.fetch!./node_modules/whatwg-fetch/fetch.js"))},"./app/containers/GroupPage/reducer.js":function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;switch(arguments[1].type){case a.b:return e.set("pending",!0);case a.c:return e.set("pending",!1);case a.a:return e.set("pending",!1).set("error",!0);case a.k:return e.set("pending",!0);case a.l:return e.set("pending",!1);case a.j:return e.set("pending",!1).set("error",!0);case a.h:return e.set("pending",!0);case a.i:return s.message.success("Приглашение отправлено"),e.set("pending",!1);case a.g:return e.set("pending",!1).set("error",!0);default:return e}}var o=n("./node_modules/immutable/dist/immutable.js"),a=(n.n(o),n("./app/containers/GroupPage/constants.js")),s=n("./node_modules/antd/lib/index.js"),i=(n.n(s),Object(o.fromJS)({pending:!1,error:!1}));t.a=r},"./app/containers/GroupPage/saga.js":function(e,t,n){"use strict";(function(e){function r(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p.a)(i,e.groupId);case 3:return t.next=5,Object(p.b)(Object(d.c)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(p.b)(Object(d.b)(t.t0));case 11:case"end":return t.stop()}},g,this,[[0,7]])}function o(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p.a)(u,e.groupId,e.memberId);case 3:return t.next=5,Object(p.b)(Object(d.i)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(p.b)(Object(d.h)(t.t0));case 11:case"end":return t.stop()}},m,this,[[0,7]])}function a(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p.a)(s,e.invitedId,e.role);case 3:return t.next=5,Object(p.b)(Object(d.f)());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(p.b)(Object(d.e)(t.t0));case 11:case"end":return t.stop()}},b,this,[[0,7]])}function s(t,n,r){return e(f.a.API_LOCAL_URL+"/group/"+t+"/member/invitation",{method:"POST",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({invitedId:n,role:r})}).catch(function(e){return e})}function i(t){return e(f.a.API_BASE_URL+"/group/"+t+"/member",{method:"POST",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")}}).catch(function(e){return e})}function u(t,n){return e(f.a.API_BASE_URL+"/group/"+t+"/member/"+n,{method:"POST",headers:{"Content-Type":"application/json-patch+json",Authorization:"Bearer "+localStorage.getItem("token")}}).catch(function(e){return e})}function c(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.c)(l.b,r);case 2:return e.next=4,Object(p.c)(l.k,o);case 4:return e.next=6,Object(p.c)(l.h,a);case 6:case"end":return e.stop()}},j,this)}t.a=c;var p=n("./node_modules/redux-saga/es/effects.js"),d=n("./app/containers/GroupPage/actions.js"),l=n("./app/containers/GroupPage/constants.js"),f=n("./app/config.js"),g=regeneratorRuntime.mark(r),m=regeneratorRuntime.mark(o),b=regeneratorRuntime.mark(a),j=regeneratorRuntime.mark(c)}).call(t,n("./node_modules/exports-loader/index.js?self.fetch!./node_modules/whatwg-fetch/fetch.js"))},"./app/containers/Header/actions.js":function(e,t,n){"use strict";function r(e){return{type:s.b,name:e}}function o(e){return{type:s.c,payload:e||[]}}function a(e){return{type:s.a,payload:e}}t.a=r,t.c=o,t.b=a;var s=n("./app/containers/Header/constants.js")},"./app/containers/Header/constants.js":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a});var r="GET_USERS_START",o="GET_USERS_SUCCESS",a="GET_USERS_FAILED"},"./app/containers/Header/selectors.js":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("./node_modules/reselect/es/index.js"),o=function(e){return e.get("header")},a=function(){return Object(r.a)(o,function(e){return e.get("users")})}}});